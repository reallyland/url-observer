<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>URLObserver demo</title>
</head>
<body>
  <script type="module">
    import '/dist/demo/demo.js';
    import '/dist/demo/demo-view.js';
  </script>
  <script type="module">
    import { URLObserver } from '/dist/url-observer.js';

    try {
      const observer = new URLObserver([
        /^\/test$/i,
        /^\/test\/(?<test>[^\/]+)$/i,
      ]);

      observer.observe(console.log, { dwellTime: -1 });

      const btn = document.body.querySelector('.simulate-urls');

      if (btn) {
        const links = Array.from(document.body.querySelectorAll('a'));

        btn.addEventListener('click', () => {
          try {
            links.forEach((n) => {
              n.click();
              console.log(n);
            });
          } catch (e) {
            console.error(e);
          }
        });
      }

      console.info('1');
    } catch (e) {
      console.error('2', e);
    }
  </script>

  <demo-view></demo-view>

  <a href="/test/123">/test/123</a>
  <a href="/test/456">/test/456</a>
  <button class="simulate-urls">Simulate URLs</button>
</body>
</html>
